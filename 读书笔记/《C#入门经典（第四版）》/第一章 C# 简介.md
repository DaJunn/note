# C#简介

本书的第1部分将介绍使用C#语言所需的基础知识。第1章将概述C# 和.NET Framework、对这些技术的理解、使用它们的原因，以及它们之间的相互关系。

首先讨论一下.NET Framework。这种技术包含的许多概念初看起来都不是很容易掌握的。也就是说，我们必须在很短的时间里介绍许多新概念，但是，快速浏览这些基础知识对于理解如何利用C# 进行编程是非常重要的，本书的后面将详细论述这里提到的许多论题。

之后，本章讨论C# 本身，包括它的起源和与C++ 的类似之处。最后，介绍本书使用的主要工具：Visual Studio 2008（VS）和Visual C# 2008 Express Edition（VCE）。

## 1.1 什么是.NET Framework

.NET Framework 是 Microsoft为开发应用程序而创建的一个富有革命性的新平台。这句话最有趣的地方时它的含糊不清，但这是有原因的。首先，注意这句话没有说“在Windows操作系统上开发应用程序”。尽管.NET Framework的Microsoft版本运行在Windows操作系统上，但以后将推出运行在其他操作系统上的版本，例如Mono，它是.NET Framework的开源代码版本（包含一个C# 编译器），该版本可以运行在几个操作系统上，包括各种Linux版本和Mac OS。许多这类项目正在开发，在读者阅读本书时可能就已发布了。另外，还可以在个人数字助手（PDA）类设备和一些智能电话上使用Microsoft .NET Compact Framework（基本上是完整.NET Framework的一个子集）。使用.NET Framework的一个主要原因是它可以作为集成各种操作系统的方式。

另外，上面给出的.NET Framework定义并没有限制应用程序的类型。这是因为本来就没有限制。.NET Framework可以创建Windows应用程序、Web应用程序、Web服务器和其他各种类型的应用程序。

.NET Framework的设计方式保证它可以用于各种语言，包括本书要介绍的C#语言，以及C++、Visual Basic、JScript，甚至一些旧的语言，如COBOL。为此，还推出了这些语言的.NET版本，目前还在不断推出更多的.NET版本语言。所有这些语言都可以访问.NET Framework，它们还可以彼此交互。C#开发人员可以使用Visual Basic程序员编写的代码，反之亦然。

所有这些提供了意想不到的多样性，这也是.NET Framework具有有人前景的部分原因。

### 1.1.1 .NET Framework的内容

.NET Framework主要包含一个非常大的代码库，可以在客户语言（如C#）中通过面向对象编程技术（OOP）来使用这些代码。这个库分为不同的模块，这样就可以根据希望得到的结果来选择使用其中的各个部分。例如，一个模式包含Windows应用程序的构件，另一个模块包含网络编程的代码块，还有一个模块包含Web开发的代码块。一些模块还分为更具体的子模块，例如，在Web开发模块中，有用于建立Web服务的子模块。

其目的是，不同的操作系统可以根据自己的特性，支持其中的部分或全部模块。例如，PDA支持所有的核心.NET功能，但不需要某些更深奥的模块。

部分.NET Framework库定义了一些基本类型。类型是数据的一种表达方式，指定其中最基础的部分（如32位带符号的整数），以便使用.NET Framework在各种语言之间进行交互操作。这称为通用类型系统（Common Type System，CTS）。

除了支持这个库以外，.NET Framework还包含.NET公共语言运行库（Common Language Runtime，CLR），它负责管理用.NET库开发的所有应用程序的执行。

### 1.1.2 用.NET Framework编写应用程序

使用.NET Framework编写应用程序，就是使用.NET代码库编写代码（使用支持Framework的任何一种语言）。本书用VS和VCE进行开发，VS是一种强大的集成开发环境，支持C#（以及托管和非托管C++、Visual Basic和其他一些语言）。VCE时VS的一个删节版本（免费），仅支持C#。这些环境的优点是便于把.NET功能集成到代码中。我们创建的代码完全时C#代码，但使用了.NET Framework，并在需要时利用了VS和VCE中的其他工具。

**1. MSIL和JIT**

在编译使用.NET Framework库的代码时，不是立即创建操作系统特定的本机代码，而是把代码编译为Microsoft中间语言（Microsoft Intermediate Language，MSIL）代码，这些代码不专用于任何一种操作系统，也不专用于C#。其他.NET语言，如Visual Basic .NET也可以在第一阶段编译为这种语言，开发C#应用程序时，编译过程就由VS或VCE完成。

显然，要执行应用程序，必须完成更多的工作，这是Just-In-Time（JIT）编译器的任务，它MSIL编译为专用于OS和目的机器结构的本机代码。这样OS才能执行应用程序。这里编译器的名称Just-In-Time反映了MSIL仅在需要时才编译的事实。

过去，常常需要把代码编译为几个应用程序，每个应用程序都用于特定的操作系统和CPU结构。这通常是一种优化形式（例如，为了让代码在AMD芯片上运行得更快），但有时是非常重要的（例如，对于工作在Win9x和WinNT/2000环境下的应用程序）。现在就不必要了，因为顾名思义，JIT编译器使用MSIL代码，而MSIL代码时独立于机器、操作系统和CPU的。目前有几种JIT编译器，每种编译器都用于不同的结构，我们总能找到一个合适的编译器创建所需的本机代码。