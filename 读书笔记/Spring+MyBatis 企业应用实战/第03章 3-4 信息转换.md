## 3.4 信息转换

### 3.4.1 HttpMessageConverter&lt;T>接口

HttpMessageConverter&lt;T>是Spring 3.0之后新增的一个重要接口，它负责将请求信息转换为一个对象（类型为T），并将对象（类型为T）绑定到请求方法的参数中或输出为响应信息。

DispatcherServlet默认已经装配了RequestMappingHandlerAdapter作为HandlerAdapter组件的实现类，即HttpMessageConverter由RequestMappingHandlerAdapter使用，将请求信息转换为对象，或将对象转换为响应信息。

HttpMessageConverter&lt;T>接口中定义了以下几个方法：

* **boolean canRead(Class&lt;?>clazz,MediaType mediaType)。** 该方法指定转换器可以读取的对象类型，即转换器可将请求信息转换为clazz类型的对象，同时指定支持的MIME类型（text/html、application/json等）。MIME媒体类型在RFC2616中定义，具体请参考http://tools.ietf.org/html/rec2626#section-3.7。
* **boolean canWrite(Class&lt;?>clazz,MediaType mediaType)。** 该方法指定转换器可以将clazz类型的对象写到响应流当中，响应流支持的媒体类型在mediaType中定义。
* **List&lt;MediaType>getSupportedMediaTypes()。**该方法返回当前转换器支持的媒体类型。
* **T read(Class&lt;？extends T>clazz,HttpInputMessage inputMessage)。** 该方法将请求信息转换为T类型的对象。
* **void write(T t,MediaType contentType,HttpOutputMessage outputMessage)。** 该方法将T类型的对象写到响应流当中，同时指定响应的媒体类型为contentType。

Spring 为HttpMessageConverter&lt;T>提供了多个实现类，这些实现类组成了一个功能强大、用途广泛的信息转换家族。详细说明如下：

* **StringHttpMessageConverter。** 将请求信息转换为字符串。泛型T为String类型，可以读取所有媒体类型（`*/*`）的请求信息，可通过设置supportedMediaTypes属性指定媒体类型。响应信息的媒体类型为text/plain（即Content-Type的值）。
* **FormHttpMessageConverter。** 将表单数据读取到MultiValueMap中。泛型T为org.springframework.util.MultiValueMap&lt;String,?>类型，支持读取application/x-www-form-urlencoded的类型，但不支持读取multipart/form-data的类型。可以写application/x-www-form-urlencoded及multipart/form-data