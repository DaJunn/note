# 第1章 .NET之道

微软的.NET平台（以及相关的C#编程语言）自2002年正式发布后很快成为软件开发的主流平台。本书的前言部分已经说过，本书的目的主要有两个：一是详细深入地讲解C#的语法和语义，二是阐述各种.NET API的用法，包括利用ADO.NET访问数据库、Entity Framework、LINQ技术、WPF、WCF、WF，以及运行ASP.NET进行Web站点开发。常言道：“千里之行，始于足下。”欢迎从本章开始的的“千里之行”。

本章将对本书其余部分所涉及的各个方面做概念性的描述。最开始将从宏观上讨论一些.NET相关主题，如程序集、CIL（Common Inermediate Language，公共中间语言）和JIT（just-in-time，即时）编译。接下来，除了预览C#语言的一些主要功能之外，还将讲述.NET Framework不同方面，例如CLR（公共语言运行库）、CTS（公共类型系统）和CLS（公共语言规范）之间的关系。

本章还会探讨.NET 4.5基础类库提供的功能，基础类库的英文Base Class Library缩写为BCL。本章最后概述.NET平台的语言无关系和平台无关性（别惊讶，.NET并不局限于Windows操作系统），还会大体讲一下在Windows 8操作系统下构建应用程序时.NET的角色。当然，所有这些主题都将在本书其余部分详细探讨。

## 1.1 初始.NET平台

在微软发布C#语言和.NET平台之前，为Windows操作系统家族创建应用程序的开发者常常使用COM编程模型。COM（Component Object Model，组件对象模型）允许个人构建可由不同编程语言共享的代码库。例如，Visual Basic开发者可以使用C++程序员构建的COM库。COM的语言无关特点自然十分有用。但它复杂的基础结构、脆弱的部署模型常常带来很多麻烦，并且只能部署在Windows操作系统上。

尽管COM有很多复杂性和局限性，但不计其数的应用程序还是成功地构建于这个基础结构之上。然而在今天，大多数为Windows操作系统家族创建的应用程序都不是用COM模型构建的。桌面应用、网站、操作系统服务、数据访问或业务逻辑复用库都是使用.NET平台创建的。

### .NET平台的主要优点

前面提到过，C#和.NET平台是2002年正式发布的，当时主要为了提供一种比COM更强大、更灵活、更简洁的编程模型。从本书后面的内容你会看到，.NET Framework用于在Windows系列操作系统和其他如Mac OS X和Unix/Linux等非微软的软件操作系统中创建系统。为了打好基础，我们先来快速浏览一下.NET Framework的一些核心功能。

* **对已有代码具有完全的互操作性：** 这（当然）是一件很好的事情。已有的COM的二进制组件可以和更新的.NET二进制组件共存，反之亦然。在.NET 4.0及后续版本，使用dynamic关键字（详见第16章）可以进一步简化这种互操作性。
* **支持多种编程语言：** 使用多种编程语言（C#、Visual Basic、F#等）创建.NET应用。
* **所有支持.NET的语言共享的公共运行时引擎：** 这个引擎的一个特点是具有一组明确定义的类型，而每一种支持.NET的语言都能“明白”这些类型。
* **语言集成：** .NET支持跨语言的继承、异常处理和代码调试。比方说，C#中定义的基类可以在Visual Basic进行扩展。
* **全面的基础类库：** 这个库除隐藏了原始API调用的复杂性外，还提供了被所有支持.NET的语言所使用的一致的对象模型。
* **简化的部署类型：** 与COM不同，.NET库不需要将二进制单元注册到系统注册表了。另外，.NET允许同一个*.dll的不同版本存在于同一台机器上。

这些核心功能以及更多内容会在后面的章节详细介绍。

## 1.2 .NET平台构造块（CLR、CTS和CLS）简介

了解了.NET的优点之后，让我们来预览一下使.NET成为现实的3个关键（而且相互关联的）实体：CLR、CTS和CLS。从程序员的角度看，.NET可以理解为一个运行库环境和一个全面的基础类库。运行库层的正式名称是CLR（Common Language Runtime，公共语言运行库）。其主要作用是为我们定位、加载和管理.NET类型，同时也负责一些低层细节的工作，如内存管理、应用托管、处理线程、安全检查等。

