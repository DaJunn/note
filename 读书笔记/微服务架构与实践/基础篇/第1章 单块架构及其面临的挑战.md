# 第1章 单块架构及其面临的挑战

随着面向对象分析、面向对象设计、面向对象原则、设计模式、企业架构模式等理念以及方法论的不断发展，从未用户提供功能以及有效组织软件结构的角度考虑，系统中不同职责的部分逐渐被定义在了不同的层次，每一层负责的部分更趋于具体化、细致化，于是软件的三层架构逐渐出现了。三层架构通常包括表示层、业务逻辑层以及数据访问层。

三层架构的出现，解决了系统间调用复杂、职责不清的问题，也有效降低了层与层之间的依赖关系，成为软件架构的经典模式之一。

虽然三层架构将系统在逻辑上分成了三层，但它并不是物理上的分层。也就是说，对不同层的代码而言，经历编译、打包、部署后，所有的代码最终还是运行在同一个进程中。

对于这种功能集中、代码中心化、一个发布包、部署后运行在同一进程的应用程序，我们通常称之为单块架构应用。

随着业务的不断扩大，需求功能的持续增加，单块架构已经很难满足业务快速变化的需求。一方面，代码的可维护性、扩展性、灵活性在降低；另一方面，系统的修改成本、构建以及维护成本在显著增加。因此，单块架构应用的改造与重构势在必行。

## 1.1 三层应用架构

### 1.1.1 三层应用架构的发展

现实生活中，”层“这个字的含义，大家一点都不陌生。我们经常说楼房高多少层，蛋糕有几层等。通常来说，层有好几种定义，但其中最耳熟能详的，莫过于”层“能帮助我们划分出构成某整体事物的、上下相互支撑的不同部分。譬如，我们喜欢吃的蛋糕，一般是由三层组成：第一层的蛋糕体、第二层的奶油和第三层的水果。从顶部至底部，每一层依赖于下一层，从底部到顶部，每一层又支撑着上一层。在软件架构模式领域，经过多年的发展，也有了层的概念：

* 层能够被单独构造。
* 每层具有区别于其他层的显著特点。
* 层与层之间能够相互连接，互相支撑，互相作用，相互协作，从而构成一个整体。
* 层的内部可以被替换成其他可工作的部分，但对整体的影响不大。

